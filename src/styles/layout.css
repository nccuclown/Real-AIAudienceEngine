/* layout.css - 佈局相關，包含網格、定位等 */

/* ---------- 視覺化區域樣式 ---------- */
.visualization-container {
  position: relative;
  display: grid;
  grid-template-columns: 30% 40% 30%;
  grid-template-rows: 100%;
  height: 100%;
  flex: 1;
  z-index: 20;
  overflow: visible !important; /* 修改：允許內容溢出容器 */
}

/* 添加動畫邊界限制，確保所有內容都在上下邊界內 */
.animation-boundary {
  position: relative;
  overflow: visible !important; /* 修改：允許內容溢出 */
  min-height: calc(100% - 110px); /* 限制最小高度 */
  margin-bottom: 10px;
}

.left-zone,
.center-zone,
.right-zone {
  position: relative;
  height: 100%;
  padding: 10px;
  overflow: visible !important; /* 修改：允許內容溢出 */
}

/* 確保center-zone能正確包含多個視覺化元素 */
.center-zone {
  position: relative;
  overflow: visible !important; /* 修改為visible，確保元素不被裁剪 */
}

/* 明確定義層次，避免視覺元素互相遮擋 */
.sphere-container,
.cube-container,
.data-fusion-container,
.matching-container {
  position: relative;
  width: 100%;
  height: 100%;
  z-index: 20;
  overflow: visible !important; /* 確保內容不被裁剪 */
}

/* 強制定義cube-container的顯示層級 */
.cube-container {
  z-index: 25;
}

/* 增加層級控制類 */
.cube-layer,
.sphere-layer {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  overflow: visible !important; /* 確保內容不被裁剪 */
  transform-style: preserve-3d; /* 啟用3D空間 */
  perspective: 1000px; /* 添加3D視角 */
}

.cube-layer {
  z-index: 25;
}

.sphere-layer {
  z-index: 20;
}

/* 確保粒子容器沒有限制 */
.particle-wrapper {
  position: absolute;
  pointer-events: none;
  z-index: 100;
  transform-style: preserve-3d; /* 啟用3D空間 */
}

/* 調整粒子標籤樣式，確保其可見 */
.particle-label {
  position: absolute;
  background-color: rgba(0, 0, 0, 0.8);
  color: inherit;
  padding: 3px 8px;
  border-radius: 4px;
  font-size: 0.75rem;
  white-space: nowrap;
  transform: translateX(-50%);
  pointer-events: none;
  z-index: 500; /* 提高z-index確保在頂層 */
  border: 1px solid currentColor;
  box-shadow: 0 0 8px currentColor; /* 添加陰影以增加可見性 */
}

/* 定義3D動畫空間 */
.engine-content {
  transform-style: preserve-3d;
  perspective: 1000px;
  overflow: visible !important;
}
